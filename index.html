<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Niyas Nowshad | Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            /* Dark Mode (Default) */
            --bg-dark: #131314;
            --bg-card: #1e1f20;
            --bg-hover: #333537;
            --text-main: #e3e3e3;
            --text-sub: #c4c7c5;
            --border: #333537;
            --accent: #8ab4f8;
            --input-bg: #1e1f20;
            --ai-bubble: #1e1f20;
            --gemini-gradient: linear-gradient(70deg, #4285f4, #9b72cb, #d96570);
        }

        body.light-mode {
            /* Light Mode  */
            --bg-dark: #ffffff;
            --bg-card: #f0f4f9;
            --bg-hover: #e1e5ea;
            --text-main: #1f1f1f;
            --text-sub: #444746;
            --border: #dde3ea;
            --accent: #0b57d0;
            --input-bg: #f0f4f9;
            --ai-bubble: #f0f4f9;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        body { background-color: var(--bg-dark); color: var(--text-main); font-family: 'Google Sans', sans-serif;line-height: 1.6; height: 100vh; display: flex; overflow: hidden; }

        /* --- Mobile Header --- */
        .mobile-header {
            display: none;
            width: 100%;
            padding: 15px 20px;
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            justify-content: space-between;
            align-items: center;
            position: fixed;
            top: 0;
            z-index: 100;
        }

        /* --- Sidebar (Responsive) --- */
        .sidebar { 
            width: 300px; 
            background-color: var(--bg-card); /* Changed from #1e1f20 */
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            border-right: 1px solid var(--border); 
            overflow-y: auto;
            transition: 0.3s ease;
        }

        .nav-item:hover { 
            background: var(--bg-hover); 
            color: var(--accent); 
        }

        .theme-toggle-top {
            position: absolute;
            top: 25px;
            right: 25px;
            z-index: 1000;
            cursor: pointer;
            background: var(--bg-card);
            border: 1px solid var(--border);
            padding: 10px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-main);
            transition: 0.3s;
        }

        .theme-toggle-top:hover {
            background: var(--bg-hover);
            transform: scale(1.1);
        }

        /* Ensure the main-content container can hold absolute items */
        .main-content { position: relative; }
        .sidebar-name { font-size: 1rem; font-weight: 500; color: var(--text-main);  transition: 0.3s; } /* Changed from white */
        
        /* Sidebar Identity */
        .profile-section { display: flex; flex-direction: column; align-items: center; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border); }
        .profile-ring { position: relative; width: 80px; height: 80px; border-radius: 50%; padding: 3px; background: conic-gradient(#4285f4, #34a853, #fbbc05, #ea4335, #4285f4); margin-bottom: 10px; }
        .profile-photo { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; background: var(--bg-card); border: 2px solid var(--bg-card); }
        .sidebar-sub { font-size: 0.75rem; color: var(--text-sub); }

        .social-btn { background: var(--bg-hover); padding: 8px; border-radius: 50%; color: var(--text-sub); transition: 0.3s; display: flex;}
        .social-btn:hover { background: var(--accent); color: var(--bg-dark);}

        .nav-list { display: flex; flex-direction: column; gap: 2px; }
        .nav-item { padding: 10px 15px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 12px; transition: 0.2s; color: var(--text-sub); font-size: 0.9rem; }
        .nav-item:hover { background: #333537; color: white; }

        .skills-section { margin: 15px 0; padding: 15px 0; border-top: 1px solid var(--border); }
        .skills-title { font-size: 0.7rem; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; font-weight: 600; }
        .skills-grid { display: flex; flex-wrap: wrap; gap: 6px; }
        .skill-tag {background: var(--bg-hover);color: var(--accent); font-size: 0.80rem; padding: 3px 8px; border-radius: 6px; border: 1px solid var(--border);}

        /* --- Main Interface --- */
        .main-content { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 20px; position: relative; overflow-y: auto; width: 100%; }
        .hero { text-align: left; width: 100%; max-width: 800px; margin-top: 12vh; padding: 0 10px; }
        .hello { font-size: 3rem; font-weight: 500; background: var(--gemini-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 8px; }
        .subtitle { font-size: 1.8rem; color: #444746; margin-bottom: 30px; text-align: justify; text-justify: inter-word; }

        /* Justification */
        .msg-content, .about-text, .subtitle, .hero p, .project-overview p { text-align: justify; text-justify: inter-word; line-height: 1.6; }

        /* Chat View */
        #chat-view { width: 100%; max-width: 800px; display: none; flex-direction: column; gap: 30px; padding-bottom: 180px; padding-top: 20px; }
        .message-row { display: flex; gap: 15px; animation: fadeIn 0.4s ease; padding: 0 10px; }
        .ai-icon { width: 32px; height: 32px; min-width: 32px; background: var(--gemini-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; }

        /* Typing & Chips */
        .typing-indicator { display: flex; gap: 5px; padding-top: 10px; }
        .dot { width: 6px; height: 6px; background: #80868b; border-radius: 50%; animation: pulse 1.5s infinite; }
        .dot:nth-child(2) { animation-delay: 0.2s; }
        .dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes pulse { 0%, 100% { opacity: 0.3; transform: scale(0.8); } 50% { opacity: 1; transform: scale(1.1); } }

        .cert-chip-full {
            background: var(--ai-bubble);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px 20px;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: 0.2s;
            width: 100%; 
            text-decoration: none;
            margin-top: 10px;
            justify-content: flex-start;
        }

        .cert-chip-full:hover {
            border-color: var(--accent);
            background: var(--bg-hover);
        }
        .action-chips { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px; width: 100% }
        .action-chip { background: var(--ai-bubble); border: 1px solid var(--border); border-radius: 12px; padding: 12px 18px; cursor: pointer; font-size: 0.9rem; color: var(--accent); display: flex; align-items: center; gap: 12px; transition: 0.2s; margin-top: 15px;}

        /* --- Bottom Input --- */
        .bottom-container { position: fixed; bottom: 20px; width: 100%; max-width: 800px; background: var(--bg-dark); padding: 0 15px; }
        .input-box { 
            background: var(--input-bg); 
            border-radius: 35px; 
            padding: 10px 20px; 
            display: flex; 
            align-items: center; 
            border: 1px solid var(--border); 
            gap: 15px; 
        }

        input { 
            background: transparent; 
            border: none; 
            flex: 1; 
            color: var(--text-main); /* Changed from white */
            font-size: 1rem; 
            outline: none; 
        }
        /* Quick Overview Layout */
        .project-overview { 
            background: var(--ai-bubble); /* Changed from #2d2f31 */
            border: 1px solid var(--border); 
            border-radius: 16px; 
            padding: 20px; 
            margin-top: 15px; 
        }
        .project-img { width: 100%; height: auto; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--border); }
        .project-links { display: flex; gap: 12px; margin-top: 15px; }
        .link-btn { display: flex; align-items: center; gap: 8px; background: var(--bg-dark); padding: 8px 15px; border-radius: 50px; text-decoration: none; color: var(--accent); font-size: 0.85rem; border: 1px solid var(--border); transition: 0.2s; }
        .link-btn:hover { border-color: var(--accent); }

        /* --- Modals --- */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(5px); justify-content: center; align-items: center; }
        .modal-content { background: var(--bg-card); padding: 25px; border-radius: 20px; width: 95%; max-width: 800px; border: 1px solid var(--border); position: relative; max-height: 90vh; overflow-y: auto; }
        .pdf-viewer { width: 100%; height: 50vh; border-radius: 10px; border: none; }

        /* --- Mobile Breakpoints --- */
        @media (max-width: 768px) {
            .mobile-header { display: flex; }
            .sidebar { 
                position: fixed; 
                left: 0; top: 0; bottom: 0; 
                z-index: 150; 
                transform: translateX(-100%); 
            }
            .sidebar.active { transform: translateX(0); }
            .main-content { padding-top: 80px; }
            .hello { font-size: 2.2rem; }
            .subtitle { font-size: 1.4rem; }
            .sidebar-overlay { 
                display: none; 
                position: fixed; 
                inset: 0; 
                background: rgba(0,0,0,0.5); 
                z-index: 120; 
            }
            .sidebar-overlay.active { display: block; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="sidebar-overlay" id="overlay" onclick="toggleSidebar()"></div>

    <header class="mobile-header">
        <div onclick="toggleSidebar()"><i data-lucide="menu" style="color: var(--text-main);"></i></div>
        <div style="font-weight: 500;">Niyas Nowshad</div>
        <div onclick="resetChat()"><i data-lucide="plus" color="white"></i></div>
    </header>

    <aside class="sidebar" id="sidebar">
        <div class="profile-section">
            <div class="profile-ring"><img src="assets/img/passport-new.jpg" class="profile-photo" alt="Niyas Nowshad"></div>
            <div class="sidebar-name">Niyas Nowshad </div>
            <div class="sidebar-sub">M.Tech Scholar (CSE)</div>
        </div>
        
        <nav class="nav-list">
            <div class="nav-item" onclick="resetChat(); toggleSidebar()"><i data-lucide="plus" size="18"></i> New chat</div>
            <div class="nav-item" onclick="ask('About'); toggleSidebar()"><i data-lucide="user" size="18"></i> About</div>
            <div class="nav-item" onclick="ask('Education'); toggleSidebar()"><i data-lucide="graduation-cap" size="18"></i> Education</div>
            <div class="nav-item" onclick="ask('Experience'); toggleSidebar()"><i data-lucide="briefcase" size="18"></i> Experience</div>
            <div class="nav-item" onclick="ask('Projects'); toggleSidebar()"><i data-lucide="code" size="18"></i> Projects</div>
            <div class="nav-item" onclick="ask('Skills'); toggleSidebar()"><i data-lucide="cpu" size="18"></i> Skills</div>
            <div class="nav-item" onclick="ask('Contact'); toggleSidebar()"><i data-lucide="mail" size="18"></i> Contact</div>
        </nav>

        <div class="skills-section">
            <p class="skills-title">Technical Stack</p>
            <div class="skills-grid">
                <span class="skill-tag">Python</span><span class="skill-tag">Deep Learning</span>
                <span class="skill-tag">Image & Video Processing</span><span class="skill-tag">OpenCV</span>
                <span class="skill-tag">TensorFlow/PyTorch</span>
            </div>
        </div>

        <div class="social-box" style="display: flex; gap: 10px; margin-top: auto; padding-top: 15px; border-top: 1px solid var(--border); justify-content: center;">
            <a href="https://linkedin.com/in/niyasnowshad" target="_blank" class="social-btn"><i data-lucide="linkedin" size="16"></i></a>
            <a href="https://github.com/niyasnowshad" target="_blank" class="social-btn"><i data-lucide="github" size="16"></i></a>
            
        </div>
        
        <button class="nav-item resume-btn" onclick="openResume(); toggleSidebar()" style="margin-top:15px; background:var(--accent); color:var(--bg-dark); border:none; font-weight:600; width:100%; justify-content:center; border-radius:20px;">Preview Resume</button>
    </aside>

    <main class="main-content" id="scroll-target">
        <div class="theme-toggle-top" onclick="toggleTheme()" title="Switch Theme">
            <i data-lucide="sun" id="theme-icon" size="20"></i>
        </div>
        <section id="hero" class="hero">
            <h1 class="hello">Hi, I'm Niyas.</h1>
            <h2 class="subtitle">M.Tech CSE Scholar & Researching in AI/ML and Computer Vision. Trying to solve real-world problems.</h2>
        </section>

        <section id="chat-view"></section>

        <div class="bottom-container">
            <div class="input-box">
                <input type="text" id="prompt" placeholder="Ask about 'Projects'..." onkeyup="if(event.key==='Enter') process()">
                <div onclick="process()" style="cursor:pointer;"><i data-lucide="send-horizontal" color="#8ab4f8"></i></div>
            </div>
        </div>
    </main>

    <div id="resume-modal" class="modal">
        <div class="modal-content">
            <div onclick="closeModals()" style="position:absolute; top:15px; right:20px; cursor:pointer;"><i data-lucide="x" color="#c4c7c5"></i></div>
            <h2 style="margin-bottom: 20px; color: var(--accent);">Resume Preview</h2>
            <iframe src="assets/resume/resume.pdf" class="pdf-viewer"></iframe>
            <a href="assets/resume/resume.pdf" download style="display:inline-block; margin-top:20px; padding:10px 20px; background:var(--accent); color:var(--bg-dark); border-radius:50px; text-decoration:none; font-weight:600;">Download PDF</a>
        </div>
    </div>

    <script>
        lucide.createIcons();
        const chat = document.getElementById('chat-view');
        const hero = document.getElementById('hero');
        const promptInput = document.getElementById('prompt');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const scrollTarget = document.getElementById('scroll-target');

        const SECTIONS = [
            { id: 'about', label: 'About', icon: 'user' },
            { id: 'education', label: 'Education', icon: 'graduation-cap' },
            { id: 'experience', label: 'Experience', icon: 'briefcase' },
            { id: 'projects', label: 'Projects', icon: 'code' },
            { id: 'skills', label: 'Skills', icon: 'cpu' },
            { id: 'contact', label: 'Contact', icon: 'mail' }
        ];

        const REPLIES = {
            greeting: "Hello! I'm Niyas' AI assistant. I can tell you about his M.Tech research, computer vision projects, or professional background. What would you like to see?",
            fallback: "I'm not sure I understand that request. Try asking about my <b>Research</b>, <b>Projects</b>, or <b>Skills</b>. You can also use the buttons below:",
            about: "Hi, I'm <b>Niyas Nowshad</b>, a <b>Computer Science Engineer</b> currently pursuing my <b>M.Tech in Computer Science</b> with a focus on cutting-edge research in Deep Learning and Computer Vision. My academic journey is driven by a passion for building intelligent systems that bridge the gap between complex data and real-world utility.<br><br>Currently, I am immersed in research centered on Image and Video Processing, exploring how deep neural networks can interpret and enhance visual information. From developing AI-powered hardware like Raspberry Pi voice assistants to my current work in advanced model architectures, I thrive on the challenge of turning theoretical concepts into functional technology.<br><br>I am a lifelong learner and a collaborative problem-solver, eager to contribute to innovative environments that push the boundaries of what’s possible with emerging technologies.",
            education: "<b>Academic History:</b><br><br>• <b>M.Tech in Computer Science & Engineering</b><br> Mar Baselios College of Engineering and Technology, Kerala (2025–2027). <br><br>• <b>B.Tech in Computer Science & Engineering</b> <i>GPA: 7.58</i><br> Rajadhani Institute of Engineering and Technology, Kerala (2021–2025). <br><br>• <b>Higher Secondary Education (Computer Science Major) </b><i>GPA: 88.8%</i><br> Sunrise English Private School, Abu Dhabi (2019–2021).",
            experience: "<b>Research & Experience:</b><br><br>• <b>Graduate Researcher | M.Tech Thesis </b><br><i>January 2026-Current, Trivandrum, Kerala</i><br><br>- Engineering a deep learning framework to automate face anonymization, ensuring individual privacy in public datasets and video surveillance.<br>- Utilizing GAN architectures to replace sensitive identities with realistic, synthetic faces while maintaining original expressions and environmental lighting.<br>- Optimizing the balance between total identity de-identification and the retention of high-fidelity visual data for secondary research and analysis.<br><br>• <b>Machine Learning Intern | Aican Automate </b><br><i>October 2022-November 2022, India</i><br><br>- Assisting with the development and implementation of machine learning models and algorithms.<br>- Cleaning and preprocessing data for machine learning tasks.<br>- Conducting research and staying up-to-date on the latest machine learning technologies.<br>- Collaborating with a team of data scientists, engineers, and other professionals to build and deploy machine learning systems.",
            skills: "<b>Technical Toolkit:</b><br><br>• <b>AI & Research:</b> Deep Learning, Computer Vision, Image/Video Processing, Machine Learning.<br>• <b>Languages:</b> Python, Java, C.<br>• <b>Libraries & Frameworks:</b> NumPy, Pandas, OpenCV, Matplotlib.<br><br>" +
                    "<b>Professional Certifications (Click to Preview):</b>" +
                    "<div style='display: flex; flex-direction: column; gap: 4px; width: 100%;'>" +
                    "<div class='cert-chip-full' onclick=\"openCert('assets/NiyasNowshad.pdf', 'Computer Vision — Udemy')\"><i data-lucide='award' size='18'></i> Computer Vision in Python — Udemy</div>" +
                    "<div class='cert-chip-full' onclick=\"openCert('assets/NiyasNowshad.pdf', 'Digital Marketing — Google')\"><i data-lucide='award' size='18'></i> Digital Marketing — Google</div>" +
                    "<div class='cert-chip-full' onclick=\"openCert('assets/NiyasNowshad.pdf', 'Tech Support — Coursera')\"><i data-lucide='award' size='18'></i> Tech Support — Coursera</div>" +
                    "</div>",   
            contact: "I am always open to discussing research collaborations, innovative projects, or new opportunities in the AI space<br><br>Reach me at <b>niyasmnowshad@gmail.com</b> or Call <b>+91 8129565041.</b>",
            projects: "Check out my major projects:<br><div class='action-chip' onclick=\"ask('Tell me about Face Anonymization')\"><i data-lucide='user-lock' size='14'></i>Face Anonymization using GAN</div><div class='action-chip' onclick=\"ask('Tell me about AI Lens')\"><i data-lucide='camera' size='14'></i> AI Lens</div><div class='action-chip' onclick=\"ask('Tell me about AI Voice Assistant')\"><i data-lucide='mic' size='14'></i>AI Voice Assistant using Raspberry PI</div>"
        };
        
        const PROJECTS = {
            'lens': {
                name: "AI Lens",
                img: "assets/img/i.png",
                desc: "A comprehensive computer vision suite for motion detection and face tracking using Python and OpenCV.",
                video: "https://drive.google.com/file/d/1SrzmgU3RwsmXieFBJL7_m0nHIrTN4zGO",
                source: "https://github.com/niyasnowshad/PythonAI",
                paper: "#"
            },
            'voice': {
                name: "AI Voice Assistant using Raspberry Pi 4",
                img: "assets/img/j.jpg",
                desc: "A Python-based voice assistant that runs locally on a Raspberry Pi 4, capturing voice input through a microphone and sending it to a laptop running LLaMA 3 for intelligent response generation.<br>Tools used: Python, Llama3, Voice-Recognition, Google TTS",                
                video: "https://drive.google.com/file/d/1Mp6knW7E37H3k2JavsbrtF_qMSGjiLRq/view?usp=sharing",
                source: "#",
                paper: "https://ijirt.org/publishedpaper/IJIRT181648_PAPER.pdf"
            },
            'face': { name: "Face Anonymization using GAN", desc: "- <b>Privacy-Preserving Vision:</b> Researching Face Anonymization using Generative Adversarial Networks (GANs) to enable secure, privacy-compliant data sharing.<br>- <b>Generative Architecture:</b> Designing models that synthesize realistic, synthetic identities while strictly preserving original facial expressions, poses, and lighting.<br>- <b>Utility Optimization:</b> Balancing absolute identity de-identification with high-fidelity data utility to ensure anonymized videos remain viable for secondary AI analysis.<br>", video: "#", source: "#", paper: "#" },
            //'vibe': { name: "next topic", desc: "Currently doing research on Face Anonymization using GAN.", video: "#", source: "#", paper: "#" },
        };


        function getProjectCard(id) {
            const p = PROJECTS[id];
            const imgTag = p.img ? `<img src="${p.img}" class="project-img" alt="${p.name}">` : '';
            
            // Conditional Button Logic
            const videoBtn = (p.video && p.video !== "#") ? `<a href="${p.video}" target="_blank" class="link-btn"><i data-lucide="play-circle" size="16"></i> Video</a>` : '';
            const sourceBtn = (p.source && p.source !== "#") ? `<a href="${p.source}" target="_blank" class="link-btn"><i data-lucide="github" size="16"></i> Code</a>` : '';
            const paperBtn = (p.paper && p.paper !== "#") ? `<a href="${p.paper}" target="_blank" class="link-btn"><i data-lucide="file-text" size="16"></i> Research Paper</a>` : '';

            const progressBadge = (p.video === "#") ? 
                `<div class="link-btn" style="opacity: 0.6; cursor: default; border-style: dashed; color: var(--text-sub); background: transparent;">
                    <i data-lucide="clock" size="16"></i> In-Progress Research
                </div>` : '';

            return `
                <div class="project-overview">
                    ${imgTag}
                    <h3 style="color:var(--accent); margin-bottom:10px;">${p.name}</h3>
                    <p>${p.desc}</p>
                    <div class="project-links">
                        ${videoBtn}
                        ${sourceBtn}
                        ${paperBtn}
                        ${progressBadge}
                    </div>
                </div>`;
        }
       
        function getFollowUpChips(currentId) {
            let chips = `<div class="action-chips"><p style="font-size:0.85rem; color:var(--text-sub); width:100%; margin-bottom:10px;">What would you like to explore next?</p>`;
            SECTIONS.forEach(s => {
                if(s.id !== currentId) {
                    chips += `<div class="action-chip" onclick="ask('${s.label}')"><i data-lucide="${s.icon}" size="14"></i> ${s.label}</div>`;
                }
            });
            return chips + `</div>`;
        }

        function toggleSidebar() { sidebar.classList.toggle('active'); overlay.classList.toggle('active'); }
        function scroll() { scrollTarget.scrollTo({ top: scrollTarget.scrollHeight, behavior: 'smooth' }); }
        function ask(q) { promptInput.value = q; process(); }
        
        function toggleTheme() {
            const body = document.body;
            const icon = document.getElementById('theme-icon');
            const text = document.getElementById('theme-text');
            
            body.classList.toggle('light-mode');
            
            const isLight = body.classList.contains('light-mode');
            
            icon.setAttribute('data-lucide', isLight ? 'moon' : 'sun');
            text.innerText = isLight ? "Dark Mode" : "Light Mode";
            
            lucide.createIcons();
        }
        function openCert(pdfPath, title) {
            const modal = document.getElementById('resume-modal');
            const viewer = modal.querySelector('.pdf-viewer');
            const modalTitle = modal.querySelector('h2');
            const downloadBtn = modal.querySelector('a[download]');

            // Update modal content for the specific certificate
            modalTitle.innerText = title;
            viewer.src = pdfPath;
            downloadBtn.href = pdfPath;
            
            modal.style.display = 'flex';
        }
        function process() {
            const val = promptInput.value.toLowerCase().trim();
            if(!val) return;
            
            hero.style.display = 'none'; chat.style.display = 'flex';
            chat.innerHTML += `<div style="display:flex; justify-content:flex-end; margin-bottom:20px; padding:0 10px;"><div style="background:var(--bg-hover); color:var(--text-main); padding:10px 20px; border-radius:18px;">${promptInput.value}</div></div>`;
            scroll();

            let reply = "";
            let currentId = null;

            // --- CONSOLIDATED DETECTION LOGIC ---
            if (val.match(/^(hi|hello|hey|hola|hey there|greetings)/)) {
                reply = REPLIES.greeting + getFollowUpChips('about');
            }
            else if(val.includes('about')) { reply = REPLIES.about; currentId = 'about'; }
            else if(val.includes('edu')) { reply = REPLIES.education; currentId = 'education'; }
            else if(val.includes('exp')) { reply = REPLIES.experience; currentId = 'experience'; }
            else if(val.includes('skill')) { reply = REPLIES.skills; currentId = 'skills'; }
            else if(val.includes('cont')) { reply = REPLIES.contact; currentId = 'contact'; }
            else if(val.includes('proj')) { reply = REPLIES.projects; currentId = 'projects'; }
            
            // Project Specific Detection
            else if(val.includes('lens')) { reply = getProjectCard('lens'); }
            else if(val.includes('voice')) { reply = getProjectCard('voice'); }
            else if(val.includes('face')) { reply = getProjectCard('face'); }
            
            // Fallback if no keywords are matched
            else {
                reply = REPLIES.fallback + getFollowUpChips(null);
            }

            // Append suggestions if it was a main section
            if (currentId && !reply.includes('action-chips')) {
                reply += getFollowUpChips(currentId);
            }

            // Reset input and show typing indicator
            promptInput.value = '';
            const tid = 't-' + Date.now();
            chat.innerHTML += `<div class="message-row" id="${tid}"><div class="ai-icon"><i data-lucide="sparkles" size="16" color="white"></i></div><div class="typing-indicator"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div>`;
            lucide.createIcons(); scroll();

            setTimeout(() => {
                document.getElementById(tid).innerHTML = `<div class="ai-icon"><i data-lucide="sparkles" size="16" color="white"></i></div><div class="msg-content">${reply}</div>`;
                lucide.createIcons(); scroll();
            }, 800);
        }

        function openResume() { document.getElementById('resume-modal').style.display = 'flex'; }
        function closeModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }
        function resetChat() { chat.innerHTML = ''; chat.style.display = 'none'; hero.style.display = 'block'; }
    </script>
</body>
</html>
